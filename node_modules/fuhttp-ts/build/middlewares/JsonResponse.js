/**
 * fuhttp-ts 1.2.1 <https://github.com/fosenutvikling/fuHTTP-ts#readme>
 * JsonResponse.js
 *
 * a HTTP-server written in TypeScript using Node.js
 *
 * Copyright (c) 2018 Jonas Kirkemyr, Fosen-Utvikling AS (http://fosen-utvikling.no), contributors
 * Licensed under the MIT license.
 */
 "use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * JsonResponse Middleware altering a http-request to include a method
 * for parsing an object to a JSON-string
 */
class JsonResponse {
    /**
     * Alters the request object
     */
    alter(req, res) {
        res.json = function (data) {
            try {
                var strJson = JSON.stringify(data);
                res.setHeader('Content-Type', 'application/json');
                res.statusCode = 200;
                res.statusMessage = 'ok';
                res.write(strJson);
            }
            catch (e) {
                res.setHeader('Content-Type', 'text/html');
                res.statusCode = 500;
                res.statusMessage = 'Invalid JSON';
                res.write("Couldn't parse json data");
            }
            res.end();
        };
        return true;
    }
}
exports.JsonResponse = JsonResponse;
//# sourceMappingURL=JsonResponse.js.map